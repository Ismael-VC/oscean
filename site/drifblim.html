<!DOCTYPE html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, inital-scale=1"/><link href="../links/main.css" type="text/css" rel="stylesheet"/><link href="../media/services/icon.png" type="image/png" rel="shortcut icon"/>
<title>XXIIVV &mdash; drifblim</title></head><body>
<header><a href="home.html"><img alt="XXIIVV" src="../media/icon/logo.svg"></a></header>
<nav><ul><li><a href="uxntal.html">uxntal</a></li><li><a href="varvara.html" class="parent">varvara</a></li></ul><ul><li><a href="varvara_tutorial.html">varvara tutorial</a></li><li><a href="bicycle.html">bicycle</a></li><li><a href="drifblim.html" class="self">drifblim</a></li><li><a href="beetbug.html">beetbug</a></li></ul><ul></ul></nav><main><h2>Drifblim is a Uxntal assembler, written in Uxntal.</h2>

<p>The assembler is written in 400 lines of <a href='uxntal.html'>Uxntal</a>, and is designed to help bootstrap the <a href='uxn.html'>Uxn</a> ecosystem. Drifblim exports a <a href='symbols.html'>symbols file</a> that can be used with <a href='beetbug.html'>debuggers</a>.</p>
<p>The goal is for Driflim's source code to be released as a print-friendly document, along with its assembled hexadecimal data and the <i>napkin definition</i> of the <a href='uxn.html'>virtual machine</a>.</p>

<pre style='background:none;padding:0'>
<b>80</b> a b c M[PC+1] <b>08</b> a b?c             <b>10</b> a b M[c8]      <b>18</b> a b+c
<b>01</b> a b c+1       <b>09</b> a b!c             <b>11</b> a {M[c8]=b}    <b>19</b> a b-c
<b>02</b> a b           <b>0a</b> a b&gt;c             <b>12</b> a b M[PC+c8]   <b>1a</b> a b*c
<b>03</b> a c           <b>0b</b> a b&lt;c             <b>13</b> a {M[PC+c8]=b} <b>1b</b> a b/c
<b>04</b> a c b         <b>0c</b> a b {PC+=c}       <b>14</b> a b M[c16]     <b>1c</b> a b&c
<b>05</b> b c a         <b>0d</b> a {(b8)PC+=c}     <b>15</b> a {M[c16]=b}   <b>1d</b> a b|c
<b>06</b> a b c c       <b>0e</b> a b {rs.PC PC+=c} <b>16</b> a b D[c8]      <b>1e</b> a b^c
<b>07</b> a b c b       <b>0f</b> a b {rs.c}        <b>17</b> a {D[c8]=b}    <b>1f</b> a b&gt;&gt;c8l&lt;&lt;c8h

<b>2x</b> a16 b16+c16   <b>4x</b> a b c {rs.b+rs.c} <b>8x</b> a b c b+c
</pre>

<p>Since this assembler is written in the language it is assembling, it creates a chicken-and-egg problem. You have two choices, download a pre-assembled <a href='https://rabbits.srht.site/drifblim/drifblim.rom' target="_blank">drifblim.rom</a>(1.7kb), or assemble it with <a href='https://git.sr.ht/~rabbits/uxn/tree/main/item/src/uxnasm.c' target="_blank">uxnasm.c</a>. </p>

<h3>Drifblim styleguide</h3>

<ul>
	<li>Indented with tabulators.</li>
	<li>Label spacers are hyphen.</li>
	<li>Labels in zero-page are tabbed.</li>
	<li>Returning opcode on the same identation as the label.</li>
	<li>Device labels are capitalized.</li>
	<li>Subroutines returning #ff/#ffff are indicated by <code>( -- &lt;index*&gt; )</code></li>
	<li>Vectors are indicated by <code>( -> )</code></li>
	<li>Tail-call optimizations are indicated by <code>( .. )</code></li>
	<li>Limit of 24 characters per tokens.</li>
	<li>Include chains.</li>
	<li>No macros.</li>
</ul>

<img src="../media/refs/drifblim.png" alt="Drawing by Rekka Bellum">

<p><i>Drifblim is strong enough to lift Pok√©mon or people but has no control over its flight. This causes it to drift with the wind and end up anywhere.</i></p>

<h3>drifblim.tal</h3>

<iframe src="https://git.sr.ht/~rabbits/drifblim/blob/main/src/drifblim.tal"></iframe>

<h3>drifblim.rom</h3>

<p>This is the hexadecimal data of the drifblim assembler, I am keeping a copy of it here just in case.</p>

<pre style='background:none;padding:0'>
a001 0d80 1037 a006 bc60 05bc 0080 1216 8000 6006 1740 0119 00a0 0126 8010 37a0 
06ca 6005 bc00 8012 1680 3060 0617 4001 3200 a00a 1817 a006 e4a0 0815 6005 eda0 
0000 6001 7ea0 06e4 a008 1560 05ed 8001 8094 11a0 0000 6001 7ea0 0030 80a8 3780 
9230 a000 ff39 80aa 37a0 4955 80ae 3760 0573 6004 eda0 010e 17a0 010f 1700 80a8 
37a0 0001 80aa 37a0 019f 80ac 3780 a236 1d40 019e 8008 1280 0008 4001 a76c 8000 
6001 b020 0187 6c80 a836 a007 2220 04be 8020 8a03 4001 c102 a007 f594 4001 d122 
6ca0 07f5 2660 05e3 a000 1f2b 4005 d802 6c26 6001 d820 0605 9480 2808 4001 ef94 
8029 0840 01ef 8000 4001 f760 01f9 6c14 8028 0880 f113 6c22 6c94 8008 13a0 07f5 
a007 c294 8000 0940 020e 2321 342c a000 0338 aa40 0203 2222 2660 03ff 4002 af26 
6004 1440 02b6 6002 906c 2160 032d 2004 ba21 6003 2d20 04b6 21a0 0815 2724 6005 
ed20 03a1 2160 03e9 2003 a180 8060 0307 2160 036a 6003 3d01 2003 0780 8060 0307 
2160 036a 3403 2003 0780 a060 0307 2160 036a 3420 0303 8020 6003 0721 6003 6a34 
2003 0380 4060 0307 2160 036a 3420 0303 8060 6003 0760 036a 3420 0303 2126 6005 
e303 8002 1fa0 a080 050c 0402 6003 0720 02d8 2120 02cd 6004 1e20 0307 a1a0 0060 
af60 05ed 6006 056f 2001 7e22 6c94 6003 0721 9440 02cd 226c 2660 05e3 2760 032d 
2403 0680 0208 4002 f806 8004 0840 02fe 0222 a007 3320 04be 0223 0320 0307 0223 
2003 0304 6003 0780 9410 8000 0840 0326 06a0 4855 8090 3038 1506 8000 0840 0326 
8090 3080 9231 02a0 0001 2004 b626 6003 ff40 033a a007 3320 04be 2006 6980 9410 
8000 0840 0366 b480 9030 39a0 0003 3926 a000 8038 0240 035b 2303 6c22 a000 0338 
a007 4420 04be 2280 006c 8094 1040 0375 22a0 0397 6c94 8026 0940 0380 2160 03e9 
6004 8fa1 1d40 038f 22a0 073a 2004 bea1 2194 0105 0515 6c00 005b 656d 7074 795d 
0080 9410 4003 e726 6004 8f21 1d40 03db 800b 32a0 4855 2a40 03e1 8090 30a0 0855 
af35 6161 6126 ef60 05ed 6005 e36f 3821 80eb 33a0 0000 2180 fa33 6ca0 0729 2004 
bea0 074d 2004 be22 6ca0 0815 a008 35af 6005 ed80 2fef 6005 d8ef 6005 ea6f 6c94 
6006 5301 4004 0b22 8000 6c21 9440 03ff 2280 016c 26a0 07bf 6006 4440 0450 2fa0 
2000 8000 0780 031a a007 5f38 ef60 0644 4004 3d01 8a40 0422 2262 8000 6c03 0680 
0008 8070 1f18 6fa0 0003 3860 0454 186c 2280 016c c000 9480 2007 8032 0840 0484 
0618 0780 7208 4004 8406 1807 806b 0840 0484 0618 0780 210b 4004 84a0 07f5 a007 
5a20 04be 030f 5d21 9440 0456 224f 6c2f a008 55a0 0003 3826 ef60 062b 4004 b060 
05cd 21a1 2121 1440 0493 2262 a0ff ff6c a000 0339 626c 8090 3038 8090 316c a007 
1860 05bc 6005 bc80 3a80 1817 a020 1817 6005 bca0 06f1 6005 bca0 0815 6005 bc80 
2e80 1817 a00a 1817 a001 0f17 00a0 0855 a121 2114 0680 400a 0480 5b0b 1c40 0518 
a121 1440 0518 a007 0660 05bc a000 0338 2660 05bc a00a 1817 6005 cd21 a121 2114 
4004 f022 a006 d960 05bc a000 0060 05bc a006 ec60 05bc a000 3060 05bc a006 f160 
05bc 8092 30a0 0100 3960 067f a006 f760 05bc 8028 8018 17a0 03d4 3460 067f a006 
fe60 05bc 8029 8018 1780 2e80 1817 a00a 1817 6ca0 0030 6005 cda0 05b7 2760 05ed 
a000 3080 a837 a008 55a0 0002 80aa 3726 80ae 37a0 0003 3826 6005 e321 80aa 3726 
80ae 3760 05cd 2126 a000 0338 1440 0589 2280 0005 0515 6c2e 7379 6d00 9440 05c2 
226c 9480 1817 2194 4005 c222 6c94 4005 d26c 2194 4005 d26c 6005 cda1 8000 0505 
1515 6c26 6005 cd24 396c 6005 cd27 1440 05f5 2222 6c2f 94ef 1561 2194 4005 f622 
8000 6f15 6c94 4006 0b22 6caf 8000 6f15 2194 4006 0b22 6c07 8021 0b40 0627 8000 
0460 05d8 8000 6c22 8001 6c2f 94d4 4f9c 8000 0840 0640 8940 0640 2221 6120 062c 
2362 086c b425 b425 280f 2134 2421 3428 4f1c 6c80 3019 0680 090a 0c6c 8027 1906 
800f 0a0c 6c02 80ff 6ce0 0000 c040 7fc0 0094 6006 530f 7821 9440 066c 226f 6c80 
0080 2313 a027 1080 1a0e a003 e880 140e a000 6480 0e0e a000 0a80 080e 0380 3018 
8018 176c bb86 8000 0840 06b8 0680 3018 8018 1780 ff80 ef13 023a 396c 496e 7075 
7428 2e74 616c 293a 2000 4f75 7470 7574 282e 726f 6d29 3a20 0041 7373 656d 626c 
6564 2000 5b72 6573 6574 5d00 202d 3e20 002c 2069 6e20 0020 6279 7465 7300 206c 
6162 656c 7300 2d2d 2055 6e75 7365 6420 6c61 6265 6c3a 2000 2121 2045 7272 6f72 
2000 536f 7572 6365 0044 7570 6c69 6361 7465 004e 756d 6265 7200 5265 6665 7265 
6e63 6500 4469 7374 616e 6365 004c 6162 656c 732d 6c69 6d69 7400 4d6f 6465 004c 
4954 494e 4350 4f50 4e49 5053 5750 524f 5444 5550 4f56 5245 5155 4e45 5147 5448 
4c54 484a 4d50 4a43 4e4a 5352 5354 484c 445a 5354 5a4c 4452 5354 524c 4441 5354 
4144 4549 4445 4f41 4444 5355 424d 554c 4449 5641 4e44 4f52 4145 4f52 5346 5442 
524b 7c02 2a24 0231 4002 3826 0244 2c02 4b5f 0250 2e02 5b2d 0260 3b02 693d 026e 
2102 763f 0283 5b02 cb5d 02cb 2302 9c22 02b2 7e02 bc00
</pre>

<ul>
	<li><a href='https://git.sr.ht/~rabbits/drifblim' target='_blank'>View Source</a></li>
	<li><a href='https://rabbits.srht.site/drifblim/drifblim.rom' target='_blank'>Download rom</a></li>
</ul>

<ul></ul><p><b>Incoming</b>: <a href="symbols.html">symbols</a> <a href="uxn_devlog.html">uxn devlog</a> <a href="oscean.html">oscean</a> </p></main>
<footer><a href="https://creativecommons.org/licenses/by-nc-sa/4.0" target="_blank"><img src="../media/icon/cc.svg" alt="CreativeCommons"/></a> <a href="https://webring.xxiivv.com/" target="_blank"><img src="../media/icon/webring.svg" alt="Webring"/></a> <a href="https://merveilles.town/@neauoire" rel="me" target="_blank"><img src="../media/icon/merveilles.svg" alt="Merveilles"/></a> <a href="ethics.html"><img src="../media/icon/dreipfeile.svg" alt="NoNazis!"/></a> <a href="uxn.html"><img src="../media/icon/uxn.svg" alt="UxnPowered"/></a> <span><a href="devine_lu_linvega.html">Devine Lu Linvega</a> &copy; 2022 &mdash; <a href="about.html">BY-NC-SA 4.0</a></span></footer>
</body></html>