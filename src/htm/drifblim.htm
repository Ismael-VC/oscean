<h2>Drifblim is a Uxntal assembler, written in Uxntal.</h2>

<p>The assembler is written in <a href='uxntal.html'>Uxntal</a> itself, and is designed to help bootstrap the <a href='uxn.html'>Uxn</a> ecosystem. Drifblim exports a <a href='symbols.html'>symbols file</a> that can be used with <a href='beetbug.html'>debuggers</a>. The goal is for Driflim's source code to be released as a print-friendly document, along with its assembled hexadecimal data and the <i>napkin definition</i> of the <a href='uxn.html'>virtual machine</a>.</p>

<p>Since the assembler is written in the language it is assembling, you have two choices, download a pre-assembled <a href='https://rabbits.srht.site/drifblim/drifblim.rom' target="_blank">drifblim.rom</a>(2kb), or assemble it with <a href='https://git.sr.ht/~rabbits/uxn/tree/main/item/src/uxnasm.c' target="_blank">uxnasm.c</a>. </p>

<h3>Interactive Mode</h3>

<p>When used interactively with <a href='left.html'>Left</a>, press <kbd>ctrl+b</kbd> to assemble the source file being worked on, into the caret-prefixed output rom specified as per the following example:</p>

<pre>left source.tal | drifblim ^output.rom</pre>

<p>Drifblim emits the working file on success through the <a href='varvara.html#console'>Console/write</a> port, and is therefore compatible with <a href='https://git.sr.ht/~rabbits/uxnlin' target='_blank'>uxnlin</a>, <a href='https://git.sr.ht/~rabbits/uxnfor' target='_blank'>uxnfor</a> and <a href='https://git.sr.ht/~rabbits/uxnbal' target='_blank'>uxnbal</a>.</p>

<h3>Drifblim Standard</h3>

<p>This styleguide specifies a restricted Uxntal target aimed at compatibility with most assemblers. To validate your own assembler, see the <a href='https://git.sr.ht/~rabbits/drifblim/tree/main/item/tests' target='_blank'>tests</a>.</p>

<ul>
	<li>Limit of 32 bytes per token.</li>
	<li>Limit of 48 bytes per label and sublabel.</li>
	<li>No nested comments</li>
	<li>Only one include per file, must be last token.</li>
	<li>No macros.</li>
</ul>

<p>Beyond features support, the following general rules apply to naming conventions:</p>

<ul>
	<li>Routines are indicated in the <code>( a b -- c)</code> style.</li>
	<li>Vectors are indicated with the <code>( -> )</code> spacer.</li>
	<li>Routine definitions using shorts use asterix, like <code>( a* -- b* )</code>.</li>
	<li>Source is indented with tabulators.</li>
	<li>Device labels are capitalized.</li>
</ul>

<img src="../media/refs/drifblim.png" alt="Drawing by Rekka Bellum">

<p><i>Drifblim is strong enough to lift Pokemon or people but has no control over its flight. This causes it to drift with the wind and end up anywhere.</i></p>

<h3>drifblim.tal</h3>

<iframe src="https://git.sr.ht/~rabbits/drifblim/blob/main/src/drifblim.tal" height='500'></iframe>

<h3>drifblim.rom</h3>

<p>This is the hexadecimal data of the drifblim assembler, I am keeping a copy of it here just in case.</p>

<pre style='background:none;padding:0'>
8017 1620 0006 a007 8f60 063b a001 1380
1037 0080 1216 0680 5e08 2000 2c80 2560
055f 2000 0100 a001 2d80 1037 0080 1216
8056 6005 4c20 0001 0060 0044 a080 2330
a000 0029 1d80 0f17 0002 a001 5180 1037
0080 1216 8056 6005 2820 0001 00a0 0164
8010 3700 8012 1680 2560 0515 2000 0100
6000 0da0 0057 6005 bfa0 0026 6005 a800
a000 5780 b837 a001 b617 a000 0180 ba37
a004 5934 a009 1260 0567 a000 0080 2331
a000 00a0 03cd 35a0 0a42 a004 5935 a000
00a0 046f 3580 0160 0016 2000 0e80 0060
000e 2000 0660 03e5 4004 2fa0 01b6 176c
8020 11a0 0100 6002 2aa0 07cb 6002 3da0
0026 6000 0580 2330 1d6c 80a8 37a0 0001
80aa 37a0 01fd 6003 f620 0008 8000 6000
1440 ffef 8021 30a0 0100 2a20 0006 a008
0a60 01f3 6c80 8760 0467 2000 016c a000
8826 6000 0340 04ff 9480 2808 2000 2a94
8008 13a0 0912 a008 df94 8000 0820 0068
a000 0338 aa20 fff1 2222 6002 c920 0136
6002 d920 0056 4000 b314 a009 12af 6004
ae80 20ef 6004 a8a0 027b 6003 8220 0024
a009 1260 0404 0220 001a 8000 0680 2809
2000 06a0 0863 6001 7e06 ef60 0481 8029
0920 ffd3 8000 ef60 0475 6f80 2010 2004
8626 6001 b040 047f 2321 342c 6002 9440
0109 2160 022e 8021 3039 4000 8121 6002
2340 007a 2140 0154 2160 0146 4001 6980
8060 00e7 2160 01ac 6002 1501 4000 dc80
8060 00d7 2160 019c 3403 4000 ce80 a060
00c9 2160 018e 3440 00bd 8020 6000 bc21
4000 aa80 4060 00b3 2140 00a1 8060 6000
aa40 0099 2126 6003 6103 8004 0880 501f
8080 1d60 0095 4000 5d21 4000 43a1 a00a
12af 6003 e360 03ef 6f40 feae 226c 0780
801c 2000 14a0 0000 a820 000a 8000 6000
6a21 aa20 fff6 2222 6c80 2130 a001 012b
2000 06a0 0855 6000 9e80 2130 3840 0093
9420 0007 22a0 0847 4000 8c94 6000 3c21
9420 fff7 226c 2660 02f0 0306 8002 0820
000d 8004 0820 000f 22a0 081f 4000 6802
6001 4103 4000 1460 013a 4000 0a60 00d4
3480 2130 2121 3904 6000 0080 3413 a000
2110 0820 0019 8020 1020 0025 a000 0080
2130 2b20 0029 a003 f280 be37 4000 2080
1012 8000 0820 0017 a008 7260 0019 4000
0e80 0080 0008 2000 0680 2130 80ce 3380
2130 2180 2131 6ca0 0088 2760 036c 8023
316c a000 0060 0300 a000 b86c 26a0 0000
6002 f526 a000 b8af 6002 ed80 2fef 6002
de6f 6002 4080 db33 8020 1020 0002 226c
6000 d320 0030 6000 e320 002a 2660 0068
211d 2000 2880 2130 a00a 42af 3561 6161
26ef 6002 b360 0212 6f38 2180 eb33 a000
0021 80fa 336c 22a0 0839 40ff 8a22 a008
1540 ff83 8020 1020 0025 9480 2609 2000
0421 60ff 7d60 0020 a11d 2000 0a22 a004
b4a0 0826 40ff 60a1 2194 0105 0515 6c22
a004 b46c ffff 3f00 800d 33a0 0459 34a0
0a42 a000 0338 26a0 0000 6001 df20 000e
6001 a221 aa20 ffea 2222 a0ff ff6c a000
0339 236c 6000 2f20 0201 a008 1f40 ff17
8020 1020 001c b480 2130 39a0 0003 3926
a000 8038 0220 0003 2303 6c22 a008 3060
fef5 2280 ff6c 2694 6001 b801 2000 0422
8000 6c21 9420 ffef 2280 016c 2660 0013
2000 0d26 a008 dc60 018a 2000 0380 006c
8001 6c2f a020 0080 0007 8003 1aa0 087c
38ef 6001 6f20 000a 018a 20ff ea22 6280
006c 0306 8000 0880 701f 186f a000 0338
6000 0218 6cc0 0094 8020 0780 3208 2000
2106 1807 8072 0820 0018 0618 0780 6b08
2000 0f06 1807 8000 0820 0006 a008 5c60
fe65 030f 5d21 9420 ffcd 224f 6ca0 0057
2660 00c1 a007 fa27 6001 5d24 80b8 37a0
0a42 a000 0280 ba37 2680 be37 a000 0338
2660 00a6 21af 80ba 3726 80be 376f 3826
a000 0338 1420 ffda 2280 0005 0515 6c80
ac37 80a2 36a0 0000 286c a004 5934 a00a
42a1 2114 2000 2da0 0003 3894 8041 1980
1a0b 2000 1f94 8028 0820 0018 26a0 07cb
6000 8920 000e a007 b960 011b 2660 0117
a00a 1917 6000 3e21 aa20 ffc5 2222 a007
d660 0103 a000 5760 00fd a007 e160 00f7
a003 cd34 a000 ff39 6000 f2a0 07e6 6000
e6a0 046f 3460 00e5 a007 ee60 00d9 a007
f640 00d3 2194 20ff fb6c 2660 fff7 2439
6c07 8021 0b20 001d 9080 3008 2000 100f
8000 cf90 1801 314f 9001 0411 8000 6ca0
0847 60fd 6203 9080 0005 116c 2f94 d44f
8920 000c 061e 8820 0006 2221 6140 ffed
2362 086c 2fd4 944f 0920 0002 6121 7434
6f28 6c80 3019 0680 0a0b 2000 0d80 2719
0680 100b 2000 0302 80ff 6ce0 0000 c040
7f94 60ff dec0 000f 7821 9420 fff0 226f
6ca0 0000 2735 2121 aa20 fff5 2222 6c60
ff63 0580 0024 356c 2f94 8000 ef35 6121
9420 fff5 2262 6c80 0005 0595 2194 20ff
fa15 6c94 8018 1721 9420 fff7 22a0 0a18
176c 9480 1917 2194 20ff f722 6ca0 2710
e000 fbbb a000 0abb 3a39 4488 07cf 081c
2000 0806 8030 1880 1917 4122 a000 0a3b
4441 cf20 ffdd 6222 226c a007 ff60 ffc2
60ff bfa0 2019 1760 ffb8 a00a 1917 6c75
7361 6765 3a20 6472 6966 626c 696d 2e72
6f6d 2069 6e70 7574 2e74 616c 206f 7574
7075 742e 726f 6d0a 002d 2d20 556e 7573
6564 206c 6162 656c 3a20 007b 6f6e 2d72
6573 6574 7d00 4173 7365 6d62 6c65 6420
0020 696e 2000 2062 7974 6573 2800 206c
6162 656c 7300 292e 0a00 2e73 796d 0021
2120 4572 726f 723a 2000 456d 7074 7920
6669 6c65 0044 7570 6c69 6361 7465 004e
756d 6265 7200 5265 6665 7265 6e63 6500
4469 7374 616e 6365 0049 6e76 616c 6964
206c 6162 656c 0049 6e76 616c 6964 2074
6f6b 656e 0052 6577 696e 6400 4f70 636f
6465 004e 6573 7465 6420 636f 6d6d 656e
7400 5a65 726f 2d70 6167 6500 4c49 5449
4e43 504f 504e 4950 5357 5052 4f54 4455
504f 5652 4551 554e 4551 4754 484c 5448
4a4d 504a 434e 4a53 5253 5448 4c44 5a53
545a 4c44 5253 5452 4c44 4153 5441 4445
4944 454f 4144 4453 5542 4d55 4c44 4956
414e 444f 5241 454f 5253 4654 4252 4b7c
02b2 2402 bd40 02c4 2602 c82c 02cf 5f02
d42e 02df 2d02 e43b 02ed 3d02 f23f 02fa
2103 035b 033c 5d03 3c23 0314 2203 297e
032d
</pre>

<ul>
	<li><a href='https://git.sr.ht/~rabbits/drifblim' target='_blank'>View Source</a></li>
	<li><a href='https://rabbits.srht.site/drifblim/drifblim.rom' target='_blank'>Download rom</a></li>
</ul>

