<h2>Drifblim is a Uxntal assembler, written in Uxntal.</h2>

<p>The assembler is written in <a href='uxntal.html'>Uxntal</a> itself, and is designed to help bootstrap the <a href='uxn.html'>Uxn</a> ecosystem. Drifblim exports a <a href='symbols.html'>symbols file</a> that can be used with <a href='beetbug.html'>debuggers</a>. The goal is for Driflim's source code to be released as a print-friendly document, along with its assembled hexadecimal data and the <i>napkin definition</i> of the <a href='uxn.html'>virtual machine</a>.</p>

<p>Since the assembler is written in the language it is assembling, you have two choices, download a pre-assembled <a href='https://rabbits.srht.site/drifblim/drifblim.rom' target="_blank">drifblim.rom</a>(2kb), or assemble it with <a href='https://git.sr.ht/~rabbits/uxn/tree/main/item/src/uxnasm.c' target="_blank">uxnasm.c</a>. </p>

<h3>Interactive Mode</h3>

<p>When used interactively with <a href='left.html'>Left</a>, press <kbd>ctrl+b</kbd> to assemble the source file being worked on, into the caret-prefixed output rom specified as per the following example:</p>

<pre>left source.tal | drifblim ^output.rom</pre>

<p>Drifblim emits the working file on success through the <a href='varvara.html#console'>Console/write</a> port, and is therefore compatible with <a href='https://git.sr.ht/~rabbits/uxnlin' target='_blank'>uxnlin</a>, <a href='https://git.sr.ht/~rabbits/uxnfor' target='_blank'>uxnfor</a> and <a href='https://git.sr.ht/~rabbits/uxnbal' target='_blank'>uxnbal</a>.</p>

<h3>Drifblim Standard</h3>

<p>This styleguide specifies a restricted Uxntal target aimed at compatibility with most assemblers. To validate your own assembler, see the <a href='https://git.sr.ht/~rabbits/drifblim/tree/main/item/tests' target='_blank'>tests</a>.</p>

<ul>
	<li>Limit of 48 bytes per token.</li>
	<li>Limit of 48 bytes per sublabel(scope+token).</li>
	<li>No nested comments</li>
	<li>Only one include per file, must be last token of file.</li>
	<li>No macros.</li>
</ul>

<p>Beyond features support, the following general rules apply to naming conventions:</p>

<ul>
	<li>Routines are indicated in the <code>( a b -- c)</code> style.</li>
	<li>Vectors are indicated with the <code>( -> )</code> spacer.</li>
	<li>Routine definitions using shorts use asterix, like <code>( a* -- b* )</code>.</li>
	<li>Source is indented with tabulators.</li>
	<li>Device labels are capitalized.</li>
</ul>

<img src="../media/refs/drifblim.png" alt="Drawing by Rekka Bellum">

<p><i>Drifblim is strong enough to lift Pokemon or people but has no control over its flight. This causes it to drift with the wind and end up anywhere.</i></p>

<h3>drifblim.tal</h3>

<iframe src="https://git.sr.ht/~rabbits/drifblim/blob/main/src/drifblim.tal" height='500'></iframe>

<h3>drifblim.rom</h3>

<p>This is the hexadecimal data of the drifblim assembler, I am keeping a copy of it here just in case.</p>

<pre style='background:none;padding:0'>
8017 1620 0006 a007 7d60 061a a001 1380
1037 0080 1216 0680 5e08 2000 2880 0460
052d 2000 0100 a001 2d80 1037 0080 1216
8035 6005 1a20 0001 0060 003e a080 0310
1d80 0f17 0002 a001 4d80 1037 0080 1216
8035 6004 fa20 0001 00a0 0160 8010 3700
8012 1680 0460 04e7 2000 0100 6000 0ba0
0036 2660 05a1 6005 8d00 a000 3680 b837
a001 b617 a000 0180 ba37 a004 3a34 a008
e260 0555 a000 0311 a000 00a0 0398 35a0
0912 a004 3a35 a000 00a0 0450 3580 0160
0016 2000 0e80 0060 000e 2000 0660 03c8
4004 12a0 01b6 176c 8000 11a0 0100 6001
fda0 07ad 6002 23a0 0005 6000 0480 0310
6c80 a837 a000 0180 aa37 a000 00a0 01f8
6003 d720 0009 2180 0060 0017 40ff ee1d
2000 0fa0 08e2 a000 6760 04eb a007 e760
01c0 6c80 6660 0437 2000 016c a000 6726
6000 0340 04e0 9480 2808 2000 2a94 8008
13a0 08e2 a008 af94 8000 0820 0037 a000
0338 aa20 fff1 2222 6002 ab20 0104 6002
bb20 0025 4000 82a0 0261 6003 6d20 04a6
a000 2889 2000 06a0 083b 6001 6501 0920
ffe5 4004 9123 2134 2c60 02a2 4001 0721
6002 4180 0130 3940 0080 2160 0236 4000
7921 4001 6521 6001 4140 017d 8080 6000
e521 6001 c060 0228 0140 00da 8080 6000
d521 6001 b034 0340 00cc 80a0 6000 c721
6001 a234 4000 bb80 2060 00ba 2140 00a8
8040 6000 b121 4000 9f80 6060 00a8 4000
9721 0660 039a 8004 0880 501f 8080 1d60
0094 4000 5d21 4000 43a1 a008 e2af 6003
f660 0402 6f40 fed9 226c 0780 801c 2000
14a0 0000 a820 000a 8000 6000 6921 aa20
fff6 2222 6c80 0130 a001 012b 2000 06a0
082d 6000 9d80 0130 3840 0092 9420 0007
22a0 0826 4000 8b94 6000 3b21 9420 fff7
226c 0660 032a 0680 0208 2000 0d80 0408
2000 0f22 a007 f640 0068 0260 0156 0340
0014 6001 4f40 000a 6000 ea34 8001 3021
2139 0460 0000 8034 13a0 0001 1008 2000
1980 0010 2000 25a0 0000 8001 302b 2000
29a0 03bd 80be 3740 0020 8010 1280 0008
2000 17a0 0842 6000 1940 000e 8000 8000
0820 0006 8001 3080 ce33 8001 3021 8001
316c 6003 84a0 0103 116c 0660 02a2 80c7
6002 9d18 802f 0a20 000a a000 0060 0307
a000 c76c a008 1d40 ffd8 26a0 0097 6002
f626 a000 c78f 6002 eea0 2f00 4f60 026b
8f31 8000 4f01 80d2 3380 0010 2000 0222
6c60 00d2 2000 3060 00e2 2000 2a26 6000
6721 1d20 0028 8001 30a0 0912 af35 6161
6126 ef60 02b1 6002 446f 3821 80eb 33a0
0000 2180 fa33 6c22 a008 1040 ff74 22a0
07ec 40ff 6d80 0010 2000 2494 8026 0920
0004 2160 ff64 6000 1fa1 a000 0028 2000
08a1 2194 0105 0515 6ca0 07fd 60ff 4322
a004 946c ffff 3f00 800d 33a0 043a 34a0
0912 a000 0338 26a0 0000 6001 e720 000e
6001 d521 aa20 ffea 2222 a0ff ff6c a000
0339 236c 6000 2f20 0209 a007 f640 ff02
8000 1020 001c b480 0130 39a0 0003 3926
a000 8038 0220 0003 2303 6c22 a008 0760
fee0 2280 ff6c 2694 6001 c001 2000 0422
8000 6c21 9420 ffef 2280 016c 2660 000e
2000 0826 a008 ac60 0192 6c80 016c 2fa0
2000 8000 0780 031a a008 4c38 ef60 017c
2000 0a01 8a20 ffea 2262 8000 6c03 0680
0008 8070 1f18 6fa0 0003 3860 0002 186c
c000 9480 2007 8032 0820 0021 0618 0780
7208 2000 1806 1807 806b 0820 000f 0618
0780 0008 2000 06a0 0834 60fe 5503 0f5d
2194 20ff cd22 4f6c a000 3626 6000 f9a0
07d7 2760 0161 2480 b837 a009 12a0 0002
80ba 3726 80be 37a0 0003 3826 6000 de21
af80 ba37 2680 be37 6f38 26a0 0003 3814
20ff da22 8000 0505 156c 80ac 3780 a236
a000 0028 6ca0 043a 34a0 0912 a121 1420
002d a000 0338 9480 4119 801a 0b20 001f
9480 2808 2000 1826 a007 ad60 0096 2000
0ea0 07a1 6001 1f26 6001 1ba0 0a19 1760
0076 21aa 20ff c522 22a0 07b3 6001 07a0
0036 6001 01a0 07be 6000 fba0 0398 34a0
00ff 3960 00f6 a007 c360 00ea a004 5034
6000 e9a0 07cb 6000 dda0 07d3 4000 d707
8021 0b20 001d 9080 2f08 2000 100f 8000
cf90 1801 314f 9001 0411 8000 6ca0 0817
60fd 5f03 9080 0005 116c 0190 20ff fb6c
0660 fff7 0419 6c21 9420 fffb 6c26 60ff
f724 396c 2f94 d44f 8920 000c 061e 8820
0006 2221 6140 ffed 2362 086c 2fd4 944f
0920 0002 6121 7434 6f28 6c80 3019 0680
0a0b 2000 0d80 2719 0680 100b 2000 0302
80ff 6ce0 0000 c040 7f94 60ff dec0 000f
7821 9420 fff0 226f 6ca0 0000 2735 2121
aa20 fff5 2222 6c2f 9480 00ef 3561 2194
20ff f522 626c 8000 0505 9521 9420 fffa
156c 9480 1817 2194 20ff f722 a00a 1817
6c94 8019 1721 9420 fff7 226c a027 10e0
00fb bba0 000a bb3a 3944 8807 cf08 1c20
0008 0680 3018 8019 1741 22a0 000a 3b44
41cf 20ff dd62 2222 6ca0 07dc 60ff c260
ffbf a020 1917 a000 6760 ffb5 a007 be60
ffb4 a000 9760 ffae a00a 1917 6c75 7361
6765 3a20 6472 6966 626c 696d 2e72 6f6d
2069 6e2e 7461 6c20 6f75 742e 726f 6d0a
002d 2d20 556e 7573 6564 3a20 0072 6573
6574 0041 7373 656d 626c 6564 2000 2069
6e20 0020 6279 7465 7328 0020 6c61 6265
6c73 0029 2e0a 002e 7379 6d00 2121 2045
7272 6f72 3a20 0046 696c 6500 4475 706c
6963 6174 6500 4e75 6d62 6572 0052 6566
6572 656e 6365 0044 6973 7461 6e63 6500
5379 6d62 6f6c 0054 6f6b 656e 0053 7562
6c61 6265 6c00 5374 7269 6e67 0052 6577
696e 6400 4f70 636f 6465 004e 6573 7465
6400 5a65 726f 2d70 6167 6500 4c49 5449
4e43 504f 504e 4950 5357 5052 4f54 4455
504f 5652 4551 554e 4551 4754 484c 5448
4a4d 504a 434e 4a53 5253 5448 4c44 5a53
545a 4c44 5253 5452 4c44 4153 5441 4445
4944 454f 4144 4453 5542 4d55 4c44 4956
414e 444f 5241 454f 5253 4654 4252 4b7c
027f 2402 8a40 0291 2602 952c 029c 5f02
a12e 02ac 2d02 b13b 02ba 3d02 bf3f 02c7
2102 d05b 0308 5d03 0823 02e1 2202 f57e
02f9
</pre>

<ul>
	<li><a href='https://git.sr.ht/~rabbits/drifblim' target='_blank'>View Source</a></li>
	<li><a href='https://rabbits.srht.site/drifblim/drifblim.rom' target='_blank'>Download rom</a></li>
</ul>

