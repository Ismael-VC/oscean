<h2>Drifblim is a Uxntal assembler, written in Uxntal.</h2>

<p>The assembler is written in <a href='uxntal.html'>Uxntal</a> itself, and is designed to help bootstrap the <a href='uxn.html'>Uxn</a> ecosystem. Drifblim exports a <a href='symbols.html'>symbols file</a> that can be used with <a href='beetbug.html'>debuggers</a>. The goal is for Driflim's source code to be released as a print-friendly document, along with its assembled hexadecimal data and the <i>napkin definition</i> of the <a href='uxn.html'>virtual machine</a>.</p>

<p>Since the assembler is written in the language it is assembling, you have two choices, download a pre-assembled <a href='https://rabbits.srht.site/drifblim/drifblim.rom' target="_blank">drifblim.rom</a>(2kb), or assemble it with <a href='https://git.sr.ht/~rabbits/uxn/tree/main/item/src/uxnasm.c' target="_blank">uxnasm.c</a>. </p>

<h3>Interactive Mode</h3>

<p>When used interactively with <a href='left.html'>Left</a>, press <kbd>ctrl+b</kbd> to assemble the source file being worked on, into the caret-prefixed output rom specified as per the following example:</p>

<pre>left source.tal | drifblim ^output.rom</pre>

<p>Drifblim emits the working file on success through the <a href='varvara.html#console'>Console/write</a> port, and is therefore compatible with <a href='https://git.sr.ht/~rabbits/uxnlin' target='_blank'>uxnlin</a>, <a href='https://git.sr.ht/~rabbits/uxnfor' target='_blank'>uxnfor</a> and <a href='https://git.sr.ht/~rabbits/uxnbal' target='_blank'>uxnbal</a>.</p>

<h3>Drifblim Standard</h3>

<p>This styleguide specifies a restricted Uxntal target aimed at compatibility with most assemblers. To validate your own assembler, see the <a href='https://git.sr.ht/~rabbits/drifblim/tree/main/item/tests' target='_blank'>tests</a>.</p>

<ul>
	<li>Limit of 32 bytes per token.</li>
	<li>Limit of 48 bytes per label and sublabel.</li>
	<li>No nested comments</li>
	<li>Only one include per file, must be last token.</li>
	<li>No macros.</li>
</ul>

<p>Beyond features support, the following general rules apply to naming conventions:</p>

<ul>
	<li>Routines are indicated in the <code>( a b -- c)</code> style.</li>
	<li>Vectors are indicated with the <code>( -> )</code> spacer.</li>
	<li>Routine definitions using shorts use asterix, like <code>( a* -- b* )</code>.</li>
	<li>Source is indented with tabulators.</li>
	<li>Device labels are capitalized.</li>
</ul>

<img src="../media/refs/drifblim.png" alt="Drawing by Rekka Bellum">

<p><i>Drifblim is strong enough to lift Pokemon or people but has no control over its flight. This causes it to drift with the wind and end up anywhere.</i></p>

<h3>drifblim.tal</h3>

<iframe src="https://git.sr.ht/~rabbits/drifblim/blob/main/src/drifblim.tal" height='500'></iframe>

<h3>drifblim.rom</h3>

<p>This is the hexadecimal data of the drifblim assembler, I am keeping a copy of it here just in case.</p>

<pre style='background:none;padding:0'>
8017 1620 0006 a007 a660 0667 a001 1380
1037 0080 1216 0680 5e08 2000 2c80 0060
059f 2000 0100 a001 2d80 1037 0080 1216
8030 6005 8c20 0001 0060 0044 a080 e430
a000 0029 1d80 0f17 0002 a001 5180 1037
0080 1216 8030 6005 6820 0001 00a0 0164
8010 3700 8012 1680 0060 0555 2000 0100
6000 0da0 0030 6005 eba0 0000 6005 d400
a000 3080 b837 a001 b617 a000 0180 ba37
a004 d734 a009 2360 0590 a000 0080 e431
a000 00a0 041d 35a0 0a73 a004 d735 a000
00a0 04ed 3580 0160 003d 2000 0e80 0060
0035 2000 0660 042f 4004 79a0 01b6 17a0
0810 6005 9e80 e430 6005 98a0 2019 17a0
0081 6005 8ea0 07e0 6005 88a0 00c1 6005
82a0 07ee 4005 7c80 e111 a001 0060 0253
a007 dba0 00a1 6005 3ba0 0000 6000 0580
e430 1d6c 80a8 37a0 0001 80aa 37a0 0227
6004 1620 0008 8000 6000 1440 ffef 80e2
30a0 0100 2a20 0006 a008 1b60 0219 6c06
8020 0a20 000a 02a0 0060 9420 0018 226c
8060 8180 fb13 0680 8008 2000 0211 6c22
a008 5840 01f1 0680 e713 2660 0003 4004
e294 8028 0820 002a 9480 0813 a009 23a0
08f0 9480 0008 2000 68a0 0003 38aa 20ff
f122 2260 02ca 2001 3d60 02da 2000 5640
00ba 14a0 0923 af60 048e 8020 ef60 0488
a002 c460 0383 2000 24a0 0923 6003 fb02
2000 1a80 0006 8028 0920 0006 a008 7460
0185 06ef 6004 6180 2909 20ff d380 00ef
6004 556f 80e1 1020 0469 2660 01e5 4004
6223 2134 2c60 0295 4001 1021 6002 2f80
e230 3940 0088 2160 0224 4000 8121 26a0
00a1 6004 2f40 019e 2160 0184 4001 9780
8060 00e7 2160 0144 6002 0f01 4000 dc80
8060 00d7 2160 0134 3403 4000 ce80 a060
00c9 2160 0126 3440 00bd 8020 6000 bc21
4000 aa80 4060 00b3 2140 00a1 8060 6000
aa40 0099 2126 6003 5103 8004 0880 501f
8080 1d60 0095 4000 5d21 4000 43a1 a00a
43af 6003 bf60 03cb 6f40 fe88 226c 0780
801c 2000 14a0 0000 a820 000a 8000 6000
6a21 aa20 fff6 2222 6c80 e230 a001 012b
2000 06a0 0866 6000 9e80 e230 3840 0093
9420 0007 22a0 0858 4000 8c94 6000 3c21
9420 fff7 226c 2660 02e0 0306 8002 0820
000d 8004 0820 000f 22a0 0830 4000 6802
6001 3b03 4000 1460 0134 4000 0a60 006c
3480 e230 2121 3904 6000 0080 3413 a000
e210 0820 0019 80e1 1020 0025 a000 0080
e230 2b20 0029 a004 4280 be37 4000 2080
1012 8000 0820 0017 a008 8360 0019 4000
0e80 0080 0008 2000 0680 e230 80ce 3380
e230 2180 e231 6c80 e431 a000 60a0 0081
6002 e1a0 00a1 a000 c140 02d8 80e1 1020
0025 9480 2609 2000 0421 6000 2360 0082
a11d 2000 0a22 a004 9ca0 0837 40ff c8a1
2194 0105 0515 6c22 a004 9c6c ffff 3f00
a000 a1a0 0a23 af60 029a 802f ef60 0288
ef60 028d 6f6c 80e1 1020 0002 226c 6000
9f20 0030 6000 af20 002a 2660 0034 211d
2000 2880 e230 a00a 73af 3561 6161 26ef
6002 6160 01d4 6f38 2180 eb33 a000 0021
80fa 336c 22a0 084a 40ff 5c22 a008 2640
ff55 800d 33a0 04d7 34a0 0a73 a000 0338
26a0 0000 6001 be20 000e 6001 9821 aa20
ffea 2222 a0ff ff6c a000 0339 236c 6000
2f20 01e0 a008 3040 ff1d 80e1 1020 001c
b480 e230 39a0 0003 3926 a000 8038 0220
0003 2303 6c22 a008 4160 fefb 2280 ff6c
2694 6001 9701 2000 0422 8000 6c21 9420
ffef 2280 016c 2660 0013 2000 0d26 a008
ed60 0169 2000 0380 006c 8001 6c2f a020
0080 0007 8003 1aa0 088d 38ef 6001 4e20
000a 018a 20ff ea22 6280 006c 0306 8000
0880 701f 186f a000 0338 6000 0218 6cc0
0094 8020 0780 3208 2000 2106 1807 8072
0820 0018 0618 0780 6b08 2000 0f06 1807
8000 0820 0006 a008 6d60 fe6b 030f 5d21
9420 ffcd 224f 6ca0 0030 2660 00b7 a008
0b27 6001 3f24 80b8 37a0 0a73 a000 0280
ba37 2680 be37 a000 0338 2660 009c 21af
80ba 3726 80be 376f 3826 a000 0338 1420
ffda 2280 0005 0515 6c80 ac37 80a2 36a0
0000 286c a004 d734 a00a 73a1 2114 2000
23a0 0003 3894 8041 1980 1a0b 2000 1594
8028 0820 000e a007 f960 0107 2660 0103
a00a 1917 6000 3e21 aa20 ffcf 2222 a007
d060 00ef a000 3060 00e9 a007 e060 00e3
a004 1d34 a000 ff39 6000 dea0 07e5 6000
d2a0 04ed 3460 00d1 a007 f160 00c5 a007
ed40 00bf 2194 20ff fb6c 2660 fff7 2439
6c07 8021 0b20 0009 8000 0460 006a 8000
6c22 8001 6c2f 94d4 4f89 2000 0c06 1e88
2000 0622 2161 40ff ed23 6208 6c2f d494
4f09 2000 0261 2174 346f 286c 8030 1906
800a 0b20 000d 8027 1906 8010 0b20 0003
0280 ff6c e000 00c0 407f 9460 ffde c000
0f78 2194 20ff f022 6f6c a000 0027 3521
21aa 20ff f522 226c 60ff 7a05 8000 2435
6c60 ff71 2f94 8000 ef35 6121 9420 fff5
2262 6c80 0005 0595 2194 20ff fa15 6c94
8018 1721 9420 fff7 22a0 0a18 176c 9480
1917 2194 20ff f722 6ca0 2710 e000 fbbb
a000 0abb 3a39 4488 07cf 081c 2000 0806
8030 1880 1917 4122 a000 0a3b 4441 cf20
ffdd 6222 226c 7573 6167 653a 2064 7269
6662 6c69 6d2e 726f 6d20 696e 7075 742e
7461 6c20 6f75 7470 7574 2e72 6f6d 0a00
4173 7365 6d62 6c65 6420 0049 4e49 5400
2069 6e20 0020 6279 7465 7328 0029 2e0a
0020 6c61 6265 6c73 002d 2d20 556e 7573
6564 206c 6162 656c 3a20 002e 7379 6d00
2121 2045 7272 6f72 3a20 0045 6d70 7479
2066 696c 6500 4475 706c 6963 6174 6500
4e75 6d62 6572 0052 6566 6572 656e 6365
0044 6973 7461 6e63 6500 496e 7661 6c69
6420 6c61 6265 6c00 496e 7661 6c69 6420
746f 6b65 6e00 5265 7769 6e64 004f 7063
6f64 6500 4e65 7374 6564 2063 6f6d 6d65
6e74 005a 6572 6f2d 7061 6765 004c 4954
494e 4350 4f50 4e49 5053 5750 524f 5444
5550 4f56 5245 5155 4e45 5147 5448 4c54
484a 4d50 4a43 4e4a 5352 5354 484c 445a
5354 5a4c 4452 5354 524c 4441 5354 4144
4549 4445 4f41 4444 5355 424d 554c 4449
5641 4e44 4f52 4145 4f52 5346 5442 524b
7c02 fb24 0306 4003 0d26 0318 2c03 1f5f
0324 2e03 2f2d 0334 3b03 3d3d 0342 3f03
4a21 0353 5b03 8c5d 038c 2303 6422 0379
7e03 7d
</pre>

<ul>
	<li><a href='https://git.sr.ht/~rabbits/drifblim' target='_blank'>View Source</a></li>
	<li><a href='https://rabbits.srht.site/drifblim/drifblim.rom' target='_blank'>Download rom</a></li>
</ul>

